This is a WIP HTML5 implementation of the game Katawa Shoujo. [0]

== Requirements ==
- Katawa Shoujo (obviously)
- Firefox/Chrome/a sensible browser (i.e. not IE)
- a shell (Bash, dash, zsh, etc)
- GNU make
- ffmpeg with fdk-aac, libopus, libtheora, libvpx, libx264 (preferably git HEAD)
- cwebp and webpmux from libwebp
- convert from ImageMagick
- apngasm
- uglifyjs

=== Recommended ===
- jpegmini
- jpegtran
- jpegrescan
- pngquant
- DeflOpt
- defluff
- nginx
- zopfli
- inotify-tools (for `make watch`)

== How to use ==
1. Navigate to http://html5ks.happinessforme.com/

== How to build ==
0. Get Katawa Shoujo.
1. Copy *.rpyc from Katawa Shoujo/game into unrpyc/ directory.
2. Extract files from Katawa Shoujo/game/data.rpa with an rpa extractor, e.g. unrpa. Put files in www/dump.
3. Install prerequisites, download DeflOpt and defluff and place exes in this directory.
4. Run setup.sh. [2]

4. Run nginx.sh to start nginx, then navigate to localhost:8080 in your browser.
-- or --
4. Open www/index.html in a browser.

== Reducing setup time ==
To reduce the setup time (many hours), try the following:

Turn off zopflipng recompression by passing ZOPFLIPNG=: as an environment variable to setup.sh. It saves only a few MB but takes several hours to complete, depending on CPU. Useful if you're serving many, MANY copies, but not useful if you're serving one locally.

== Reducing file size ==
Run `make space`. Warning: This will remove source files from dump.

== Contributing ==

Check Bugzilla for things that need to be done. [3]

See docs/ for the obvious.

Run `make watch` to automatically re-make when changes are made.

[0] http://www.katawa-shoujo.com/
[1] https://github.com/cujojs/when/
[2] If you're on Windoze, sucks for you. Use a better OS.
[3] https://bugzilla.happinessforme.com/buglist.cgi?cmdtype=runnamed&namedcmd=Open+HTML5KS+bugs
