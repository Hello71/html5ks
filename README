This is a WIP HTML5 implementation of the game Katawa Shoujo. [0]

jQuery is not used, but when.js [1] is used as a sensible Promises/A+ implementation.

== Requirements ==
- Katawa Shoujo (obviously)
- when.js
- Firefox/Chrome
- ffmpeg with AAC, libtheora, libvpx, libx264
- opus-tools
- libwebp
- make (non-GNU untested)

How to use:
0. Get Katawa Shoujo.
1. Copy *.rpyc from Katawa Shoujo/game into unrpyc/ directory.
2. Extract files from data.rpa with an appropriate tool. Put files in www/dump.
3. Run make.

4. Run nginx.sh [2] to start nginx with appropriate options for development, then connect to localhost:8080.
-- or --
4. Open www/index.html in a browser. This is untested, and some things may not work. [3]

lighttpd.conf is no longer maintained. Patches to fix it are welcome.

== Reducing setup time ==
By editing the *encode.sh files, you can turn on or off the various encodings. To reduce the setup time (many hours), try the following:

Turn off zopflipng re-coding in iencode.sh. It saves only a few MB but takes several hours to complete. Useful if you're serving many, MANY copies, but not useful if you're serving one.

== Reducing file size ==
After all the re-encoding, the final size of KS 1.1 is about 1.9G. The majority of this is taken up by the massive .wav extractions of the music files required by opusenc.

They are not required by pretty much any major browsers to play the music, and are a last resort for the code.

You can remove them with a command such as `find . -name '*.wav' -delete`.

== Contributing ==

Check Bugzilla for things that need to be done. [4]

[0] http://www.katawa-shoujo.com/
[1] https://github.com/cujojs/when/
[2] If you're on Windoze, sucks for you. Use a better OS.
[3] Do not send patches for this, unless they also fix other issues.
[4] https://bugzilla.happinessforme.com/buglist.cgi?cmdtype=runnamed&namedcmd=Open+HTML5KS+bugs
